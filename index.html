<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Metro City — Portale Istituzionale</title>
  <meta name="description" content="Portale istituzionale della Città di Metro City: notizie, servizi, bandi e trasparenza." />
  <meta property="og:title" content="Metro City — Portale Istituzionale" />
  <meta property="og:description" content="Notizie, servizi online, bandi e trasparenza di Metro City." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/og-image.png" />
  <meta property="og:locale" content="it_IT" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Tavolozza viola */
      --violet-800:#4B2E83; /* principale */
      --violet-700:#5A35A3;
      --violet-600:#6B3FC7;
      --violet-500:#7C55D9;
      --violet-200:#D9CCFF;
      --ink:#0C0D10;
      --ink-2:#1A1B22;
      --bg:#0F1016;
      --bg-2:#12131B;
      --paper:#FFFFFF;
      --muted:#8D91A3;
      --line:#222433;
      --radius:14px;
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --container:1200px;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:#EDEEF4;
      background:linear-gradient(180deg,var(--bg),var(--bg-2));
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale
    }
    a{color:#EDEEF4;text-decoration:none}
    a:hover{text-decoration:underline;text-decoration-color:var(--violet-500)}
    .container{width:min(100% - 32px, var(--container)); margin-inline:auto}
    .grid{display:grid;gap:22px}
    .grid.cols-2{grid-template-columns:repeat(2,1fr)}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    .grid.cols-4{grid-template-columns:repeat(4,1fr)}
    @media (max-width: 960px){.grid.cols-2,.grid.cols-3,.grid.cols-4{grid-template-columns:1fr}}
    /* Accessibilità */
    .skip{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip:focus{left:16px;top:16px;background:#1b1c26;border:1px solid var(--violet-500);padding:8px 12px;border-radius:10px}

    /* Header istituzionale */
    header.top{
      position:sticky;top:0;z-index:50;
      background:rgba(10,11,16,.7);
      backdrop-filter:saturate(130%) blur(8px);
      border-bottom:1px solid #161825;
    }
    .bar{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:12px}
    .crest{
      width:40px;height:40px;border-radius:50%;
      background: radial-gradient(120% 120% at 30% 20%, var(--violet-600), var(--violet-800));
      display:grid;place-items:center;box-shadow:0 0 0 1px rgba(124,85,217,.35),0 6px 16px rgba(0,0,0,.35)
    }
    .crest svg{width:22px;height:22px;color:white;opacity:.95}
    .brand .title{font-weight:700;letter-spacing:.2px}
    .brand .title small{display:block;color:var(--violet-200);font-weight:600;letter-spacing:.08em}
    nav.links{display:flex;gap:18px;align-items:center}
    nav.links a{opacity:.92}
    .search-btn,.menu-btn{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid #23263A;border-radius:10px;background:#16192A;color:#EDEEF4;
      padding:8px 10px
    }
    .menu-btn{display:none}
    @media (max-width:980px){nav.links{display:none}.menu-btn{display:inline-flex}}

    /* Mega search panel */
    .search-panel{
      display:none; position:absolute; left:0; right:0;
      background:#0F111B; border-top:1px solid #1C2033; box-shadow:0 14px 34px rgba(0,0,0,.45)
    }
    .search-panel.open{display:block}
    .search-wrap{padding:18px 0; display:grid; gap:12px}
    .search-input{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid #23263A;
      background:#121427; color:#EDEEF4; font-size:1rem
    }

    /* Hero con evidenza */
    .hero{
      background:
        radial-gradient(900px 500px at 15% -200px, rgba(124,85,217,.18), transparent 60%),
        radial-gradient(900px 500px at 85% -200px, rgba(106,63,199,.18), transparent 60%);
      padding: 54px 0 28px;
      border-bottom:1px solid #171A29;
    }
    .eyebrow{color:var(--violet-200);text-transform:uppercase;font-size:.85rem;letter-spacing:.12em;font-weight:600}
    h1{font-size:clamp(1.9rem,4vw,2.6rem);line-height:1.2;margin:6px 0 12px}
    .lead{color:#B7BAD0;max-width:70ch}

    /* Cards & lists */
    .card{
      background:rgba(255,255,255,.02); border:1px solid #1E2134; border-radius:var(--radius);
      padding:18px; transition:transform .2s ease, border-color .2s ease, background .2s ease
    }
    .card:hover{transform:translateY(-2px); border-color:rgba(124,85,217,.35); background:rgba(124,85,217,.06)}
    .card h3{margin:6px 0 8px; font-size:1.1rem}
    .muted{color:#9CA0B4}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid #2A2D43;border-radius:999px;background:rgba(255,255,255,.02);font-size:.9rem}
    .chip--violet{border-color:rgba(124,85,217,.45)}
    .cta{
      display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;
      border:1px solid rgba(124,85,217,.75); background:linear-gradient(180deg,var(--violet-600),var(--violet-800));
      color:#fff; font-weight:600; box-shadow:var(--shadow)
    }
    .section-head{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:16px}
    .section-head h2{margin:0;font-size:1.5rem}

    /* Liste notizie */
    .news-list{display:grid;gap:14px}
    .news-item{display:grid;gap:6px;padding:14px;border:1px solid #1E2134;border-radius:12px;background:rgba(255,255,255,.015)}
    .news-item strong{font-weight:600}
    .news-item time{color:#9CA0B4;font-size:.9rem}

    /* Sezioni */
    section{padding:36px 0}
    section.alt{background:linear-gradient(180deg,#0F1016,#12131B)}
    .cols{display:grid;gap:22px;grid-template-columns:2fr 1fr}
    @media (max-width: 980px){.cols{grid-template-columns:1fr}}

    /* Footer istituzionale */
    footer{
      margin-top:24px;padding:40px 0 56px;background:#0D0E15;border-top:1px solid #181A2B
    }
    .foot-grid{display:grid;gap:22px;grid-template-columns:2fr 1fr 1fr}
    @media (max-width: 900px){.foot-grid{grid-template-columns:1fr}}
    .foot h4{margin:0 0 8px;color:var(--violet-200);font-size:1rem}
    .list{list-style:none;padding:0;margin:0;display:grid;gap:8px}
    .legal{margin-top:18px;color:#9CA0B4;font-size:.9rem}
    .ext{opacity:.95}
    .ext:hover{text-decoration:underline;text-decoration-color:var(--violet-500)}
  </style>
</head>
<body>
  <a class="skip" href="#contenuto">Salta al contenuto principale</a>

  <!-- Header -->
  <header class="top" role="banner">
    <div class="container bar">
      <a class="brand" href="#" aria-label="Metro City - Portale Istituzionale">
        <span class="crest" aria-hidden="true">
          <!-- Mini stemma MC -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M4 10l8-6 8 6v6c0 4-3 6-8 8-5-2-8-4-8-8v-6z"/>
            <path d="M8 12h8M12 8v8"/>
          </svg>
        </span>
        <span class="title">Metro City <small>Portale Istituzionale</small></span>
      </a>

      <nav class="links" aria-label="Navigazione principale">
        <a href="#in-evidenza">In evidenza</a>
        <a href="#notizie">Notizie</a>
        <a href="#comunicati">Comunicati</a>
        <a href="#bandi">Bandi</a>
        <a href="#servizi">Servizi</a>
        <a href="#trasparenza">Trasparenza</a>
        <button class="search-btn" id="openSearch" aria-expanded="false" aria-controls="search-panel">Cerca</button>
      </nav>

      <button class="menu-btn" id="openMenu" aria-expanded="false" aria-controls="menu-panel">Menu</button>
    </div>

    <!-- Search panel -->
    <div id="search-panel" class="search-panel" aria-hidden="true">
      <div class="container search-wrap">
        <label for="site-search" class="visually-hidden">Cerca nel sito</label>
        <input id="site-search" class="search-input" type="search" placeholder="Cerca in Metro City…" />
        <div class="grid cols-4">
          <a class="chip chip--violet" href="#servizi">Servizi online</a>
          <a class="chip" href="#bandi">Bandi e avvisi</a>
          <a class="chip" href="#notizie">Ultime notizie</a>
          <a class="chip" href="#trasparenza">Amministrazione trasparente</a>
        </div>
      </div>
    </div>

    <!-- Menu mobile -->
    <div id="menu-panel" class="search-panel" aria-hidden="true">
      <div class="container search-wrap">
        <nav class="grid" aria-label="Menu mobile">
          <a href="#in-evidenza">In evidenza</a>
          <a href="#notizie">Notizie</a>
          <a href="#comunicati">Comunicati</a>
          <a href="#bandi">Bandi</a>
          <a href="#servizi">Servizi</a>
          <a href="#trasparenza">Trasparenza</a>
          <a class="ext" href="https://metrocity.life" target="_blank" rel="noopener">metrocity.life</a>
        </nav>
      </div>
    </div>
  </header>

  <main id="contenuto">
    <!-- Hero -->
    <section class="hero">
      <div class="container">
        <div class="eyebrow">Portale ufficiale — Metro City</div>
        <h1>Informazioni, servizi e opportunità per cittadini e imprese.</h1>
        <p class="lead">Aggiornamenti istituzionali, bandi, servizi digitali e documenti in trasparenza. Tutto in un unico luogo, con un linguaggio chiaro e verificabile.</p>
        <div class="grid cols-3" style="margin-top:18px">
          <a class="card" href="#in-evidenza">
            <strong>In evidenza</strong>
            <p class="muted">Le comunicazioni più importanti del momento.</p>
          </a>
          <a class="card" href="#servizi">
            <strong>Servizi online</strong>
            <p class="muted">Sportelli digitali per richieste e pagamenti.</p>
          </a>
          <a class="card" href="#trasparenza">
            <strong>Trasparenza</strong>
            <p class="muted">Atti, documenti e dati pubblici.</p>
          </a>
        </div>
      </div>
    </section>

    <!-- In evidenza -->
    <section id="in-evidenza" class="alt">
      <div class="container">
        <div class="section-head">
          <h2>In evidenza</h2>
          <a class="ext" href="#notizie">Tutte le notizie</a>
        </div>
        <div class="grid cols-3">
          <article class="card">
            <span class="chip chip--violet">Avviso</span>
            <h3>Nuove linee guida per servizi digitali</h3>
            <p class="muted">Pubblicate le indicazioni operative per l’accesso ai servizi online.</p>
          </article>
          <article class="card">
            <span class="chip chip--violet">Comunicazione</span>
            <h3>Calendario interventi su infrastrutture</h3>
            <p class="muted">Programmazione lavori e possibili interruzioni programmate.</p>
          </article>
          <article class="card">
            <span class="chip chip--violet">Bando</span>
            <h3>Sostegno a progetti d’impresa</h3>
            <p class="muted">Aperta la presentazione delle domande per il nuovo avviso.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- Colonne Notizie / Comunicati -->
    <section class="alt">
      <div class="container cols">
        <!-- Notizie -->
        <div id="notizie">
          <div class="section-head">
            <h2>Notizie</h2>
            <a class="ext" href="#notizie">Archivio</a>
          </div>
          <div class="news-list" id="news-feed" data-source="/data/news.json" aria-live="polite">
            <article class="news-item">
              <strong>In allestimento</strong>
              <p class="muted">Le notizie saranno pubblicate a breve.</p>
              <time datetime="2025-08-10">10 agosto 2025 · Metro City</time>
            </article>
          </div>
        </div>

        <!-- Comunicati -->
        <div id="comunicati">
          <div class="section-head">
            <h2>Comunicati</h2>
            <a class="ext" href="#comunicati">Archivio</a>
          </div>
          <div class="news-list" id="pr-feed" data-source="/data/press.json" aria-live="polite">
            <article class="news-item">
              <strong>In allestimento</strong>
              <p class="muted">I comunicati stampa saranno pubblicati a breve.</p>
              <time datetime="2025-08-10">10 agosto 2025 · Metro City</time>
            </article>
          </div>
        </div>
      </div>
    </section>

    <!-- Bandi e avvisi -->
    <section id="bandi">
      <div class="container">
        <div class="section-head">
          <h2>Bandi e avvisi</h2>
          <a class="ext" href="#bandi">Tutti i bandi</a>
        </div>
        <div class="grid cols-3">
          <article class="card">
            <h3>Avviso pubblico MC‑01/2025</h3>
            <p class="muted">Supporto iniziative sociali — Scadenza 30/09/2025</p>
          </article>
          <article class="card">
            <h3>Bando MC‑Impresa/2025</h3>
            <p class="muted">Contributi a fondo perduto — Scadenza 15/10/2025</p>
          </article>
          <article class="card">
            <h3>Manifestazione d’interesse</h3>
            <p class="muted">Elenco operatori economici — Scadenza 31/12/2025</p>
          </article>
        </div>
      </div>
    </section>

    <!-- Servizi -->
    <section id="servizi" class="alt">
      <div class="container">
        <div class="section-head">
          <h2>Servizi</h2>
          <a class="ext" href="#servizi">Catalogo completo</a>
        </div>
        <div class="grid cols-4">
          <a class="card" href="#">
            <h3>Anagrafe e certificati</h3>
            <p class="muted">Richiesta certificati, residenza, stato di famiglia.</p>
          </a>
          <a class="card" href="#">
            <h3>Imprese</h3>
            <p class="muted">Registrazione impresa, SUAP, autorizzazioni.</p>
          </a>
          <a class="card" href="#">
            <h3>Tributi</h3>
            <p class="muted">Pagamenti, scadenze e agevolazioni.</p>
          </a>
          <a class="card" href="#">
            <h3>Mobilità</h3>
            <p class="muted">Permessi, ZTL, trasporto pubblico.</p>
          </a>
        </div>
      </div>
    </section>

    <!-- Trasparenza / Amministrazione -->
    <section id="trasparenza">
      <div class="container">
        <div class="section-head">
          <h2>Trasparenza e amministrazione</h2>
          <a class="ext" href="#trasparenza">Tutti i documenti</a>
        </div>
        <div class="grid cols-3">
          <a class="card" href="#"><h3>Amministrazione trasparente</h3><p class="muted">Atti, dati e documenti.</p></a>
          <a class="card" href="#"><h3>Giunta e Consiglio</h3><p class="muted">Organi di governo e deleghe.</p></a>
          <a class="card" href="#"><h3>Albo pretorio</h3><p class="muted">Pubblicazioni ufficiali.</p></a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer role="contentinfo">
    <div class="container">
      <div class="foot-grid">
        <div class="foot">
          <h4>Metro City</h4>
          <ul class="list">
            <li><a class="ext" href="https://metrocity.life" target="_blank" rel="noopener">Sito ufficiale — metrocity.life</a></li>
            <li><a href="#trasparenza">Amministrazione trasparente</a></li>
            <li><a href="#servizi">Servizi online</a></li>
          </ul>
        </div>
        <div class="foot">
          <h4>Argomenti</h4>
          <ul class="list">
            <li><a href="#notizie">Notizie</a></li>
            <li><a href="#comunicati">Comunicati</a></li>
            <li><a href="#bandi">Bandi e avvisi</a></li>
          </ul>
        </div>
        <div class="foot">
          <h4>Contatti</h4>
          <ul class="list">
            <li><a href="#" aria-disabled="true">Sportelli (presto disponibili)</a></li>
            <li><a href="#" aria-disabled="true">Assistenza (presto disponibile)</a></li>
          </ul>
        </div>
      </div>
      <div class="legal">
        © <span id="year"></span> Metro City — Portale Istituzionale. Tutti i contenuti sono informativi. Per i dettagli fare riferimento ai documenti ufficiali.
      </div>
    </div>
  </footer>

  <script>
    // Utilità
    const $ = s => document.querySelector(s);

    // Header: search
    const openSearch = $('#openSearch');
    const searchPanel = $('#search-panel');
    openSearch?.addEventListener('click', () => {
      const isOpen = searchPanel.classList.toggle('open');
      openSearch.setAttribute('aria-expanded', String(isOpen));
      searchPanel.setAttribute('aria-hidden', String(!isOpen));
      if (isOpen) setTimeout(()=>$('#site-search')?.focus(), 50);
    });

    // Header: mobile menu
    const openMenu = $('#openMenu');
    const menuPanel = $('#menu-panel');
    openMenu?.addEventListener('click', () => {
      const isOpen = menuPanel.classList.toggle('open');
      openMenu.setAttribute('aria-expanded', String(isOpen));
      menuPanel.setAttribute('aria-hidden', String(!isOpen));
    });

    // Year
    $('#year').textContent = new Date().getFullYear();

    // Loader per feed JSON (Notizie e Comunicati)
    async function loadFeed(elId){
      const container = document.getElementById(elId);
      if(!container) return;
      const src = container.getAttribute('data-source');
      if(!src) return;
      try{
        const res = await fetch(src, { cache: 'no-store' });
        if(!res.ok) return;
        const items = await res.json(); // [{title, body, dateISO, place, type}]
        if(!Array.isArray(items) || !items.length) return;
        container.innerHTML = '';
        for(const it of items){
          const article = document.createElement('article');
          article.className = 'news-item';
          const date = it.dateISO ? new Date(it.dateISO) : new Date();
          const dateStr = date.toLocaleDateString('it-IT',{day:'numeric',month:'long',year:'numeric'});
          article.innerHTML = `
            <strong>${it.title}</strong>
            <p class="muted">${it.body || ''}</p>
            <time datetime="${it.dateISO || ''}">${dateStr} · ${it.place || 'Metro City'}</time>
          `;
          container.appendChild(article);
        }
      }catch(e){/* silenzioso */}
    }
    loadFeed('news-feed');   // /data/news.json
    loadFeed('pr-feed');     // /data/press.json
  </script>
</body>
</html>
